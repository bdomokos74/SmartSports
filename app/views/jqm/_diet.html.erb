<div data-role="page" id="dietPage" >
  <input id="data-lang-diet" value="<%=I18n.locale%>" type="hidden" />
  <div data-role="header" id="dietHeader" class="diet-style">
    <h1><%=t 'menu_diet'%></h1>
    <a href="#menuPanel" data-icon="carat-r" data-iconpos="notext" data-shadow="false" data-iconshadow="false" >Open left panel</a>
    <!--<a href="#settingsPage" data-icon="gear" data-iconpos="notext">Settings</a>-->
  </div><!-- /header -->


  <div role="main" class="ui-content">
    <div class="ui-corner-all custom-corners">
      <div class="ui-bar ui-bar-a">
        <%= image_tag "food40.png" %>
        <h3><%=t 'food'%></h3>
      </div>
      <div class="ui-body ui-body-a">
        <%= form_tag( "/users/#{current_user.id}/diets", remote: true, id: "bp-create-form", class: "resource-create-form diet-form") do %>
            <input type="hidden" name="diet[source]" value="<%= @default_source %>">
            <input type="hidden" name="diet[diet_type]" value="Food">
            <input type="search" id="foodname" name="food_name" placeholder="<%=t 'food_placeholer'%>">
            <ul id="food_autocomplete" data-role="listview" data-inset="true" data-filter="true" data-input="#foodname"></ul>
            <input id="diet_type_id" name="diet[food_type_id]" type="hidden">
            <input id="diet_name" name="diet[name]" type="hidden">
            <label for="diet_scale"><%=t 'amount'%></label>
            <input id="diet_scale" type="range" name="diet[amount]" min="0.5" max="5" step="0.5" value="2.5">
            <input id='diet_food_datepicker' type='text' readonly="true" name="diet[date]" value="<%= DateTime.current.strftime("%F %R") %>"/>
            <button class="ui-shadow ui-btn ui-corner-all sendForm"><%=t 'button_add'%></button>
        <% end %>
      </div>
    </div>
    <br>
    <div class="ui-corner-all custom-corners">
      <div class="ui-bar ui-bar-a">
        <%= image_tag "drink40.png" %>
        <h3><%=t 'drink'%></h3>
      </div>
      <div class="ui-body ui-body-a">
        <%= form_tag( "/users/#{current_user.id}/diets", remote: true, id: "bp-create-form", class: "resource-create-form diet-form") do %>
            <input type="hidden" name="diet[source]" value="<%= @default_source %>">
            <input type="hidden" name="diet[diet_type]" value="Drink">
            <input type="search" id="drinkname" name="drink_name" placeholder="<%=t 'drink_placeholder'%>">
            <ul id="drink_autocomplete" data-role="listview" data-inset="true" data-filter="true" data-input="#drinkname"></ul>
            <input id="drink_type_id" name="diet[food_type_id]" type="hidden">
            <input id="drink_name" name="diet[name]" type="hidden">
            <label for="drink_scale"><%=t 'amount'%></label>
            <input id="drink_scale" type="range" name="diet[amount]" min="0.5" max="5" step="0.5" value="2.5">
            <input id='diet_drink_datepicker' type='text' readonly="true" name="diet[date]" value="<%= DateTime.current.strftime("%F %R") %>"/>
            <button class="ui-shadow ui-btn ui-corner-all sendForm"><%=t 'button_add'%></button>
        <% end %>
      </div>
    </div>
    <br>
    <div class="ui-corner-all custom-corners">
      <div class="ui-bar ui-bar-a">
        <%= image_tag "smoke40.png" %>
        <h3><%=t 'smoking'%></h3>
      </div>
      <div class="ui-body ui-body-a">
        <%= form_tag( "/users/#{current_user.id}/diets", remote: true, id: "bp-create-form", class: "resource-create-form diet-form") do %>
            <input type="hidden" name="diet[source]" value="<%= @default_source %>">
            <input type="hidden" name="diet[diet_type]" value="Smoke">

            <select id="diet_smoke_type" name="diet[name]">
              <option>1 Cigaretta</option>
              <option>1 Szivar</option>
              <option>1 Pipa</option>
            </select>

            <input id='diet_smoking_datepicker' type='text' readonly="true" name="diet[date]" value="<%= DateTime.current.strftime("%F %R") %>"/>
            <button class="ui-shadow ui-btn ui-corner-all sendForm"><%=t 'button_add'%></button>
        <% end %>
      </div>
    </div>
    <br>
    <div class="ui-corner-all custom-corners">
      <div data-role="navbar" data-iconpos="bottom">
        <ul>
          <li><a id="hist-button" href="#" data-icon="grid" class="ui-btn-active"><%=t 'history_link'%></a></li>
          <li><a id="fav-button"href="#" data-icon="star"><%=t 'fav_link'%></a></li>
        </ul>
      </div>
      <ul id="dietListView" data-role="listview" data-split-icon="gear" data-split-theme="a" data-inset="true" class="ui-body recentResourcesListview">
        <%= render partial: "shared/diet_item", collection: @diets, as: "diet_item" %>
      </ul>

    </div>
  </div><!-- /content -->

  <div data-role="popup" id="successPopup" class="ui-content" style="max-width:280px" data-history="false" data-theme="b">
    <p>Item successfully created.</p>
  </div>

  <div data-role="popup" id="failurePopup" class="ui-content" style="max-width:280px" data-history="false" data-theme="b">
    <p>Failed to create item.</p>
  </div>

</div>

<div id="editFoodPage" data-role="page" data-theme="a" class="ui-corner-all">
  <div data-role="header">
    <h1 class="diet-group">Food</h1>
    <a href="#dietPage" data-icon="carat-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" data-transition="slide" data-direction="reverse">Back</a>
  </div>
  <div class="ui-content">
    <%= form_tag(  "#", remote: true, id: "updateFoodForm", method: 'patch') do %>
      <div class="ui-field-contain">
        <label for="edit_food_name">Name</label>
        <input id="edit_food_name" type="text" name="food_name" value="" data-theme="a" readonly="true">
        <label id="edit_food_category_label" for="edit_food_category">Category</label>
        <input id="edit_food_category" type="text" name="food_category" value="" data-theme="a" readonly="true">
        <label for="edit_food_date">Date</label>
        <input id="edit_food_date" type="text" name="food_date" value="" data-theme="a" readonly="true">

        <label for="food_amount_edit_scale">Amount:</label>
        <input type="range" name="diet[amount]" id="food_amount_edit_scale" min="0.5" max="5" step="0.5" value="2.5">
        <label for="food_favorite">Favorite</label>
        <input id="food_favorite" type="checkbox" name="diet[favourite]" value="" data-theme="a" data-role="flipswitch">
      </div>
      <button type="submit" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-check">Update</button>
    <% end %>

    <%= form_tag(  "#", remote: true, id: "createNewFoodForm", method: 'post') do %>
        <div class="ui-field-contain">
          <input type="hidden" name="diet[source]" value="<%= @default_source %>">
          <input id="new_diet_type" type="hidden" name="diet[diet_type]" >
          <input id="new_diet_type_id" name="diet[food_type_id]" type="hidden">
          <label for="new_food_name">Name</label>
          <input id="new_food_name" type="text" name="diet[name]" value="" data-theme="a" readonly="true">
          <label id="new_food_category_label" for="edit_food_category">Category</label>
          <input id="new_food_category" type="text" name="food_category" value="" data-theme="a" readonly="true">
          <label for="new_food_date">Date</label>
          <input id="new_food_date" type="text" name="diet[date]" value="" data-theme="a">

          <label id="new_food_amount_edit_scale_label" for="new_food_amount_edit_scale">Amount:</label>
          <input type="range" name="diet[amount]" id="new_food_amount_edit_scale" min="0.5" max="5" step="0.5" value="2.5">

        </div>
        <button type="submit" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-check">Create New</button>
    <% end %>
    <%= form_tag(  "#", remote: true, id: "deleteFoodForm", method: 'delete') do %>
      <button type="submit" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-delete ui-icon-check">Delete</button>
    <% end %>

  </div>
</div>

<!--diet_loaded()-->

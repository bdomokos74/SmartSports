<div data-role="page" id="exercisePage" >
  <input id="intensity_values" value="<%=t :intensities%>" type="hidden" />
  <div data-role="header" id="exerciseHeader" class="exercise-style">
    <h1>Exercise</h1>
    <a href="#menuPanel" data-icon="carat-r" data-iconpos="notext" data-shadow="false" data-iconshadow="false" >Open left panel</a>
  </div><!-- /header -->

  <div role="main" class="ui-content">
    <div class="ui-corner-all custom-corners">
      <div class="ui-bar ui-bar-a">
        <%= image_tag "bicycle40.png" %>
        <h3><%=t 'exercise' %></h3>
      </div>
      <div class="ui-body ui-body-a">
        <%= form_tag("/users/#{current_user.id}/activities", remote: true, id: "exercise-create-form", class: "resource-create-form exercise-form") do %>
            <div class="dataForm">
              <input type="hidden" name="activity[source]" value="<%= @default_source %>">
              <input type="hidden" name="activity[group]" value="sport">

              <input  id="activityname" type="search" name="activity_name" placeholder="<%=t :activity_name_placeholder%>">
              <input id="activity_type_id" name="activity[activity_type_id]" type="hidden">
              <ul id="activity_autocomplete" data-role="listview" data-inset="true" data-filter="true" data-input="#activityname"></ul>

              <label for="activity_scale" style="margin-left: 20px;"><%=t :intensity%></label>
              <input id="activity_scale" type="range" name="activity[intensity]" min="1" max="3" value="2">

              <br/><br/>

              <label for="activity_start_datepicker"><%=t :start%></label>
              <input id='activity_start_datepicker' type='text' readonly="true" name="activity[start_time]" value="<%= (DateTime.current-30.minutes).strftime("%F %R") %>"/>

               <label for="activity_end_datepicker"><%=t :end%></label>
              <input id='activity_end_datepicker' type='text' readonly="true" name="activity[end_time]" value="<%= DateTime.current.strftime("%F %R") %>"/>

            </div>
            <button id="addActivityButton"><%=t 'button_add'%></button>
        <% end %>
      </div>
    </div>

    <br/>

    <div class="ui-corner-all custom-corners">
      <div class="ui-bar ui-bar-a">
        <%= image_tag "regular40.png" %>
        <h3><%=t 'regular_activity' %></h3>
      </div>
      <div class="ui-body ui-body-a">
        <%= form_tag("/users/#{current_user.id}/activities", remote: true, id: "regular-activity-create-form", class: "resource-create-form exercise-form") do %>
            <div class="dataForm">
              <input type="hidden" name="activity[source]" value="<%= @default_source %>">
              <input type="hidden" name="activity[group]" value="other">

              <input  id="otheractivityname" type="search" name="other_activity_name" placeholder="<%=t :other_activity_name_placeholder%>">
              <input id="activity_other_type_id" name="activity[activity_type_id]" type="hidden">
              <ul id="activity_other_autocomplete" data-role="listview" data-inset="true" data-filter="true" data-input="#otheractivityname"></ul>


              <label for="activity_other_scale" style="margin-left: 20px;"><%=t :intensity%></label>
              <input id="activity_other_scale" type="range" name="activity[intensity]" min="1" max="3" value="2">

              <br/><br/>

              <label for="activity_other_start_datepicker"><%=t :start%></label>
              <input id='activity_other_start_datepicker' type='text' readonly="true" name="activity[start_time]" value="<%= (DateTime.current-30.minutes).strftime("%F %R") %>"/>

              <label for="activity_other_end_datepicker"><%=t :end%></label>
              <input id='activity_other_end_datepicker' type='text' readonly="true" name="activity[end_time]" value="<%= DateTime.current.strftime("%F %R") %>"/>

            </div>
            <button id="addOtherActivityButton"><%=t 'button_add'%></button>
        <% end %>
      </div>
    </div>
    <br>
    <div class="ui-corner-all custom-corners">
      <div data-role="navbar" data-iconpos="bottom">
        <ul>
          <li><a id="hist-exercise-button" href="#" data-icon="grid" class="ui-btn-active">History</a></li>
          <li><a id="fav-exercise-button"href="#" data-icon="star">Favs</a></li>
        </ul>
      </div>
      <ul data-role="listview" data-split-icon="gear" data-split-theme="a" data-inset="true" class="ui-body recentResourcesListview">
        <%= render partial: "shared/activity_item", collection: @activities, as: "activity_item" %>
      </ul>

    </div>
  </div><!-- /content -->

  <div data-role="popup" id="successExercisePopup" class="ui-content" style="max-width:280px" data-history="false" data-theme="b">
    <p>Item successfully created.</p>
  </div>

  <div data-role="popup" id="failureExercisePopup" class="ui-content" style="max-width:280px" data-history="false" data-theme="b">
    <p>Failed to create item.</p>
  </div>


</div>